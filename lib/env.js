// Generated by IcedCoffeeScript 1.6.3-g
(function() {
  var Env, RunMode, _env;



  RunMode = (function() {
    RunMode.prototype.DEVEL = 0;

    RunMode.prototype.PROD = 1;

    function RunMode(s) {
      var m, t, _ref;
      t = {
        devel: this.DEVEL,
        prod: this.PROD
      };
      _ref = (s != null) && ((m = t[s]) != null) ? [m, s, true] : [this.PROD, "prod", false], this._v = _ref[0], this._name = _ref[1], this._chosen = _ref[2];
    }

    RunMode.prototype.is_devel = function() {
      return this._v === this.DEVEL;
    };

    RunMode.prototype.is_prod = function() {
      return this._v === this.PROD;
    };

    RunMode.prototype.toString = function() {
      return this._name;
    };

    RunMode.prototype.chosen = function() {
      return this._chosen;
    };

    RunMode.prototype.config_dir = function() {
      return this._name;
    };

    return RunMode;

  })();

  Env = (function() {
    function Env(_arg) {
      this.argv = _arg.argv, this.config = _arg.config;
      this.env = process.env;
    }

    Env.prototype.get_opt = function(_arg) {
      var arg, co, config, dflt, env;
      env = _arg.env, arg = _arg.arg, config = _arg.config, dflt = _arg.dflt;
      co = this.config.obj;
      return (typeof env === "function" ? env(this.env) : void 0) || (typeof arg === "function" ? arg(this.argv) : void 0) || ((co != null) && (typeof config === "function" ? config(co) : void 0)) || (typeof dflt === "function" ? dflt() : void 0) || null;
    };

    Env.prototype.get_port = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_PORT;
        },
        arg: function(a) {
          return a.port;
        },
        config: function(c) {
          var _ref;
          return (_ref = c.server) != null ? _ref.port : void 0;
        },
        dflt: function() {
          return 443;
        }
      });
    };

    Env.prototype.get_host = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_HOST;
        },
        arg: function(a) {
          return a.host;
        },
        config: function(c) {
          var _ref;
          return (_ref = c.server) != null ? _ref.host : void 0;
        },
        dflt: function() {
          return "keybase.io";
        }
      });
    };

    Env.prototype.get_debug = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_DEBUG;
        },
        arg: function(a) {
          return a.d;
        },
        config: function(c) {
          var _ref;
          return (_ref = c.run) != null ? _ref.d : void 0;
        },
        dflt: function() {
          return false;
        }
      });
    };

    Env.prototype.get_no_tls = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_NO_TLS;
        },
        arg: function(a) {
          return a["no-tls"];
        },
        config: function(c) {
          var _ref;
          return (_ref = c.server) != null ? _ref.no_tls : void 0;
        },
        dflt: function() {
          return false;
        }
      });
    };

    Env.prototype.get_uri_prefix = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_URI_PREFIX;
        },
        arg: function(a) {
          return a["api-uri-prefix"];
        },
        config: function(c) {
          var _ref;
          return (_ref = c.server) != null ? _ref.api_uri_prefix : void 0;
        },
        dflt: function() {
          return "/_/api/1.0";
        }
      });
    };

    Env.prototype.get_run_mode = function() {
      var raw;
      if (!this._run_mode) {
        raw = this.get_opt({
          env: function(e) {
            return e.KEYBASE_RUN_MODE;
          },
          arg: function(a) {
            return a.m;
          },
          config: function(c) {
            var _ref;
            return (_ref = c.run) != null ? _ref.mode : void 0;
          },
          dflt: null
        });
        this._run_mode = new RunMode(raw);
      }
      return this._run_mode;
    };

    Env.prototype.get_log_level = function() {
      return this.get_opt({
        env: function(e) {
          return e.KEYBASE_LOG_LEVEL;
        },
        arg: function(a) {
          return a.l;
        },
        config: function(c) {
          var _ref;
          return (_ref = c.run) != null ? _ref.log_level : void 0;
        },
        dflt: function() {
          return null;
        }
      });
    };

    Env.prototype.get_args = function() {
      return this.argv._;
    };

    Env.prototype.get_argv = function() {
      return this.argv;
    };

    return Env;

  })();

  _env = null;

  exports.make = function(a) {
    return _env = new Env;
  };

  exports.get = function() {
    return _env;
  };

}).call(this);
