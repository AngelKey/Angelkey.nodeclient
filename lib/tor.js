// Generated by IcedCoffeeScript 1.7.1-c
(function() {
  var SocksHttpAgent, agent, enabled, env, hidden_address, log, proxy;

  SocksHttpAgent = require('socks5-http-client/lib/Agent');

  env = require('./env').env;

  log = require('./log');

  hidden_address = function(null_ok) {
    return env().get_tor_hidden_address(null_ok);
  };

  proxy = function(null_ok) {
    return env().get_tor_proxy(null_ok);
  };

  enabled = function() {
    return (env().get_tor() != null) || (proxy(true) != null) || (hidden_address(true) != null);
  };

  agent = function() {
    var px;
    if (enabled()) {
      px = proxy(false);
      log.debug("| Setting tor proxy to " + (JSON.stringify(px)));
      return new SocksHttpAgent({
        socksPort: px.port,
        socksHost: px.hostname
      });
    } else {
      return null;
    }
  };

  module.exports = {
    hidden_address: hidden_address,
    proxy: proxy,
    enabled: enabled,
    agent: agent
  };

}).call(this);
