// Generated by IcedCoffeeScript 1.7.1-b
(function() {
  var C, algos, alloc, alloc_or_throw, k, make_hasher, v, _lookup, _ref;

  C = require('./const').openpgp;

  algos = require('triplesec').hash;

  make_hasher = function(klass, name, type) {
    var f;
    if (klass != null) {
      f = function(x) {
        return (new klass).bufhash(x);
      };
      f.type = type;
      f.algname = name;
      f.output_length = klass.output_size;
      return f;
    } else {
      return null;
    }
  };

  _lookup = {};

  _ref = C.hash_algorithms;
  for (k in _ref) {
    v = _ref[k];
    _lookup[v] = k;
    exports[k] = make_hasher(algos[k], k, v);
  }

  exports.alloc = alloc = function(typ) {
    var klass, name, ret;
    ret = null;
    name = _lookup[typ];
    if (name != null) {
      klass = algos[name];
    }
    if (klass != null) {
      ret = make_hasher(klass, name, typ);
    }
    return ret;
  };

  exports.alloc_or_throw = alloc_or_throw = function(typ) {
    var ret;
    ret = alloc(typ);
    if (!ret) {
      throw new Error("unknown hash type: " + typ);
    }
    return ret;
  };

}).call(this);
